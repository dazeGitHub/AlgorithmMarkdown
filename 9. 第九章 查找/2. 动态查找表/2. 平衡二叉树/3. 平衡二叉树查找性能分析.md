
#### 平衡树查找的分析

##### 平衡树的最大深度

在平衡树上进行査找的过程和排序树相同，因此，在查找过程中和给定值进行比较的关键字个数不超过树的深度。那么，含有 n 个关键字的平衡树的最大深度是多少呢？为解答这个向题，我们先分析深度为 h 的平衡树所具有最少结点数。

假设以 $N_h$ 表示深度为 h 的平衡树中含有的最少结点数。显然，$N_{0}=0, N_{1}=1, N_{2}=2$，并且 $N_{h}=N_{h-1}+N_{h-2}+1$。这个关系和斐波那契序列极为相似。利用归纳法容易证明：当 $h \geq 0$ 时 $N_{h}=F_{h+2}-1$，而 $F_h$ 约等于 $\varphi^{h} / \sqrt{5}$（其中 $\varphi=\frac{1+\sqrt{5}}{2}$）则 $N_h$ 约等于 $\varphi^{h+2} / \sqrt{5}-1$。反之，**含有 n 个结点的平衡树的最大深度为 $\log _{\varphi}(\sqrt{5}(n+1))-2$**。因此，在平衡树上进行查找的时间复杂度为 $O(\log n)$

##### 不等概率时的处理

上述对二叉排序树和二叉平衡树的查找性能的讨论都是在等概率的前提下进行的，若查找概率不等，则类似于“9.1.3 静态树表的查找”中的讨论。为了提高查找效率，需要对待查记录序列先进行排序，使其按关键字递增（或递减）有序，然后再按算法 9.4 构造棵次优査找树。

显然，次优查找树也是一棵二叉排序树，但次优査找树不能在查找过程中插入结点生成。二叉排序树（或称二叉査找树）是动态树表，最优或次优查找树是静态树表。
