
#### B- 树查找分析

从算法 9.11 可见，在 B 树上进行査找包含两种基本操作：

$(1)$ 在 B- 树中找结点； 
$(2)$ 在结点中找关键字。

由于 B 树通常存储在磁盘上，则前一査找操作是在磁盘上进行的（在算法 9.11 中没有体现），而后一査找操作是在内存中进行的，即在磁盘上找到指针 p 所指结点后，先将结点中的信息读入内存，然后再利用顺序查找或折半查找查询等于 K 的关键字。

显然，在磁盘上进行一次査找比在内存中进行一次査找耗费时间多得多，因此，在磁盘上进行查找的次数、即待査关键字所在结点在 B 树上的层次数，是决定 B- 树查找效率的首要因素。

##### B- 树上的最大层次数

现考虑最坏的情况，即待査结点在 B- 树上的最大层次数。也就是，含 N 个关键字的 m 阶 B- 树的最大深度是多少？

先看一棵 3 阶的 B- 树。按 B- 树的定义，3 阶的 B- 树上所有非终端结点至多可有两个关键字，至少有一个关键字（即子树个数为 2 或 3, 故又称 2-3 树）。因此，若关键字个数 $\leq 2$ 时，树的深度为 2（即叶子结点层次为 2）；若关键字个数 $\leq 6$ 时，树的深度不超过 3。反之，若 B 树的深度为 4, 则关键字的个数必须 $\geq 7$（参见图 $9.15(g)$ ），此时，每个结点都含有可能的关键字的最小数目。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200713162404.png)

##### B- 树的最少结点数

一般情况的分析可类似二叉平衡树进行，先讨论深度为 l + 1 的 m 阶 B-树所具有的最少结点数。

根据 B-树的定义，第一层至少有 1 个结点；第二层至少有 2 个结点；由于除根之外的每个非终端结点至少有 $\lceil m / 2\rceil$ 棵子树,则第三层至少有 2 $\lceil m / 2\rceil$ 个结点; $\cdots$;（即 2 个第二层的非终端结点的子树个数）依次类推,第 $l + 1$ 层至少有 $2(\lceil m / 2\rceil)^{l-1}$ 个结点。而 $l + 1$ 层的结点为叶子结点。

若 m 阶 B- 树中具有 N 个关键字，则叶子结点即查找不成功的结点为 N + 1, 由此有：

$\qquad N + 1 \geqslant 2 *(\lceil m / 2\rceil)^{t-1}$
反之
$\qquad l \leqslant \log _{\lceil m / 2\rceil}\left(\frac{N + 1}{2}\right) + 1 \qquad\qquad\qquad (9-21)$

这就是说，在含有 N 个关键字的 B-树上进行查找时，从根结点到关键字所在结点的路径上涉及的结点数不超过 $\log _{\lceil m / 2\rceil}\left(\frac{N + 1}{2}\right) + 1$
