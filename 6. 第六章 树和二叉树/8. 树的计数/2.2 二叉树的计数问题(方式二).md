
#### 二叉树的计数问题(方式二)

我们还可以从另一个角度来讨论这个问题。从二叉树的遍历已经知道，任意一棵二叉树结点的前序序列和中序序列是惟一的。反过来，给定结点的前序序列和中序序列，能否确定一棵二叉树呢？叉是否惟一呢？

由定义，二叉树的前序遍历是先访问根结点 D，其次遍历左子树 L，最后遍历右子树 R。即在结点的前序序列中，第一个结点必是根 D；而另一方面，由于中序遍历是先遍历左子树 L，然后访问根 D，最后遍历右子树 R，则根结点 D 将中序序列分割成两部分：在 D 之前是左子树结点的中序序列，在 D 之后是右子树结点的中序序列。反过来，根据左子树的中序序列中结点个数，叉可将前序序列除根以外分成左子树的前序序列和右子树的前序序列两部分。依次类推，便可递归得到整棵二叉树。

##### 例 6-5

已知结点的前序序列和中序序列分别为：

前序序列：ABCDEFG 
中序序列：CBEDAFG

则可按上述分解求得整棵二叉树。其构造过程如图 6.31 所示。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200701153709.png)

首先由前序序列得知二叉树的根为 A，则根据中序序列得到其左子树的中序序列为（CBED），右子树的中序序列为（FG）。反过来根据前序序列得知其左子树的前序序列必为（BCDE），右子树的前序序列为（FG）。类似地，可由左子树的前序序列和中序序列构造得 A 的左子树，由右子树的前序序列和中序序列构造得 A 的右子树。

上述构造过程说明了给定结点的前序序列和中序序列，可确定一棵二叉树。至于它的惟一性，读者可试用归纳法证明之。

我们可由此结论来推论具有 n 个结点的不同形态的二叉树的数目。

假设对二叉树的 n 个结点从 1 到 n 加以编号，且令其前序序列为 1,2, …, n，则由前面的讨论可知，不同的二叉树所得中序序列不同。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200701154112.png)

如图 6.32 所示两棵有 8 个结点的二叉树，它们的前序序列都是 12345678, 而（a）树的中序序列为 32465178, (b）树的中序序列为 23147685。因此，不同形态的二叉树的数目恰好是前序序列均为 $12 \cdots n$ 的二叉树所能得到的中序序列的数目。而中序遍历的过程实质上是一个结点进栈和出栈的过程。二叉树的形态确定了其结点进栈和出栈的顺序，也确定了其结点的中序序列。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200701154309.png)

例如图 6.33 中所示为 $n = 3$ 时不同形态的二叉树在中序遍历时栈的状态和访问结点次序的关系。由此，由前序序列 $12 \cdots n$ 所能得到的中序序列的数目恰为数列 $12 \cdots n$ 按不同顺序进栈和出栈所能得到的排列的数目。这个数目为①

$\qquad C_{2 n}^{n}-C_{2 n}^{n-1}=\frac{1}{n+1} C_{2 n}^{n} \qquad (6-13)$

> ① 参考书目 [3] 中译本第 457 页。

由二又树的计数可推得树的计数。由“6.4.2 森林与二叉树的转换”中可知一棵树可转换成惟一的一棵没有右子树的二又树，反之亦然。

则具有 n 个结点有不同形态的树的数目 t。和具有 nー1 个结点互不相似的二又树的数目相同。即 $t_n = b_{n-1}$。

图 6.34 展示了具有 4 个结点的树和具有 3 个结点的二又树的关系。从图中可见，在此讨论树的计数是指有序树，因此（c）和（d）是两棵有不同形态的树（在无序树中，它们被认为是相同的）。
