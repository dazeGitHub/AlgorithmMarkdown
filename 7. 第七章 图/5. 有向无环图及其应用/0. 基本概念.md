
#### 有向无环图及其应用

一个无环的有向图称做 **有向无环图**（directed acycline graph），简称 DAG 图。DAG 图是一类较有向树更一般的特殊有向图，如

![](https://gitee.com/mayundaze/img_bed/raw/master/20200703173820.png)

图 7.21 列示了有向树、DAG 图和有向图的例子。

有向无环图是描述含有公共子式的表达式的有效工具。例如下述表达式

$\qquad ((a + b) * (b (c + d)) + (c + d) e) * ((c + d) * e)$

可以用第 6 章讨论的二叉树来表示，如图 7.22 所示。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200703174016.png)

仔细观察该表达式，可发现有一些相同的子表达式，如 $(c + d)$ 和 $(c + d) * e$ 等，在二叉树中，它们也重复出现。若利用有向无环图，则可实现对相同子式的共享，从而节省存储空间。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200703174056.png)

例如图 7.23 所示为表示同一表达式的有向无环图。

检查一个有向图是否存在环要比无向图复杂。对于无向图来说，若深度优先遍历过程中遇到 **回边（即指向已访问过的顶点的边）**，则必定存在环；而对于有向图来说，这条回边有可能是指向深度优先生成森林中另一棵生成树上顶点的弧。但是，如果从有向图上某个顶点 $v$ 出发的遍历，在 $dfs(v)$ 结束之前出现一条从顶点 $u$ 到顶点 $v$ 的回边（如图 7.24 所示），由于 $u$ 在生成树上是 $v$ 的子孙，则有向图中必定存在包含顶点 $v$ 和 $u$ 的环。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200703174342.png)

有向无环图也是描述一项工程或系统的进行过程的有效工具。除最简单的情况之外，几乎所有的工程（project）都可分为若干个称做活动（activity）的子工程，而这些子工程之间，通常受着一定条件的约束，如其中某些子工程的开始必须在另一些子工程完成之后。对整个工程和系统，人们关心的是两个方面的问题：

1. 一是工程能否顺利进行；
2. 二是估算整个工程完成所必须的最短时间

对应于有向图，即为进行 拓扑排序 和 求关键路径 的操作。下面分别就这两个问题讨论之。
