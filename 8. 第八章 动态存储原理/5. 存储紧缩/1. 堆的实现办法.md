
前面几节中讨论的动态存储管理方法都有一个共同的特点，即建立一个“空闲块”或“无用结点”组成的可利用空间表，这个可利用空间表采用链表结构，其结点大小可以相同，也可以不同，这一节将要介绍另一种结构的动态存储管理方法。

##### “堆” 的实现办法

在整个动态存储管理过程中，不管哪个时刻，可利用空间都是一个地址连续的存储区，在编译程序中称之为“堆”，每次分配都是从这个可利用空间中划出一块。

其实现办法是：设立一个指针，称之为堆指针，始终指向堆的最低（或最高）地址。当用户申请 N 个单位的存储块时，堆指针向高地址（或低地址）移动 N 个存储单位，而移动之前的堆指针的值就是分配给用户的占用块的初始地址。回顾第 4 章中提及的串值存储空间的动态分配就是用的这种堆的存储管理。

> 例如，某个串处理系统中有 A、B、C、D 这 4 个串，其串值长度分别为 12、6、10 和 8。假设堆指针 free 的初值为零，则分配给这 4 个串值的存储空间的初始地址分别为 0、12、18 和 28, 如图 8.12 (a）和（b）所示，分配后的堆指针的值为 36。

因此，这种堆结构的存储管理的分配算法非常简单。反之，回收用户释放的空闲块就比较麻烦。由于系统的可利用空间始终是一个地址连续的存储块，因此回收时必须将所释放的空闲块合并到整个堆上去才能重新使用，这就是“存储紧缩”的任务。

![](https://gitee.com/mayundaze/img_bed/raw/master/20200708170257.png)
